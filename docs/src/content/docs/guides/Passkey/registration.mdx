---
title: Registration Guide
sidebar:
  order: 10
  badge:
    text: "WIP"
    variant: caution
  label: Registration
tags:
  - Passkey
  - Registration
  - Wallet
  - Android
  - Browser
  - Server
---
import { Tabs, TabItem, Steps, Aside} from '@astrojs/starlight/components';

Registering a [Passkey](../../concepts#passkeys) is a three-step process.

<Steps>
  1. Fetch the **Creation Options** from the [Server](../../../server/introduction).
  2. Create a new [Passkey](../../concepts#passkeys) using the **Creation Options**.
  3. Post the **Attestation Response** from an authenticator to the [Server](../../../server/introduction).
</Steps>

## Options

[PublicKeyCredentialCreationOptions](https://developer.mozilla.org/en-US/docs/Web/API/PublicKeyCredentialCreationOptions) are used to create a new Passkey and are generated by the service.
This allows the service to define what options are required for registration.
The URI for this request is [/attestation/request](../../../server/api/operations/attestationcontroller_request) using the `POST` method.

<Aside>
The service requires the liquid extension to be enabled for the request.
</Aside>
<Tabs>
  <TabItem label="cURL">
    ```bash
    curl -X POST \
      --header "Content-Type: application/json" \
      --data '{"extensions": {"liquid": true}}' \
      https://my-liquid-auth-service.com/attestation/request
    ```
  </TabItem>
  <TabItem label="Browser">
    ```typescript
    //app.js
    import { fetchAttestationRequest } from '@algorandfoundation/liquid-client/attestation'
    const options = await fetchAttestationRequest("https://my-liquid-auth-service.com")
    ```
    See the [Browser](../../../clients/browser/registration) registration guide for more details.
  </TabItem>
  <TabItem label="Android">
    ```kotlin
    //app.kt
    import foundation.algorand.auth.fido2.*
    ```
    See the [Android](../../../clients/android/registration) registration guide for more details.
  </TabItem>
</Tabs>

## Creating

Generating a new Passkey from an authenticator can vary depending on the platform.
Most platforms will accept the **Creation Options** and return an [AuthenticatorAttestationResponse](https://developer.mozilla.org/en-US/docs/Web/API/AuthenticatorAttestationResponse).


<Tabs>
  <TabItem label="Browser">
    ```typescript
    //app.ts
    const response: AuthenticatorAttestationResponse = await navigator.credentials.create({
      publicKey: options
    })
    ```
    See the [Browser](../../../clients/browser/registration) registration guide for more details.
  </TabItem>
  <TabItem label="Android">
    ```kotlin
    //app.kt
    // Create a new PublicKeyCredential using
    // FIDO2Client, CredentialManager, or CredentialProviderService
    val credential = PublicKeyCredential()
    ```
    See the [Android](../../../clients/android/registration) registration guide for more details.
  </TabItem>
</Tabs>

## Response

Registering a new Passkey with the service. Prove the authenticity of the Passkey by sending the **Attestation Response** to the service.

<Aside>The service requires the liquid extension results to include an additional attestation</Aside>

<Tabs>
  <TabItem label="cURL">
    ```bash
    curl -X POST \
      --header "Content-Type: application/json" \
      --data '{"attestationResponse": "<base64>", "clientDataJSON": "<base64>", "extension"}' \
      https://my-liquid-auth-service.com/attestation/response
    ```
  </TabItem>
  <TabItem label="Browser">
    ```typescript
    //app.ts
    import { fetchAttestationResponse } from '@algorandfoundation/liquid-client/attestation'
    const response = await fetchAttestationResponse("https://my-liquid-auth-service.com", {
      attestationResponse: "<base64>",
      clientDataJSON: "<base64>",
      extension: {
        liquid: true
      }
    })
    ```
    See the [Browser](../../../clients/browser/registration) registration guide for more details.
  </TabItem>
  <TabItem label="Android">
    ```kotlin
    //app.kt
    val response = attestationApi.postAttestationResponse(
      origin, // Origin Server
      "User-Agent-String", // Required for checking the authenticator fingerprint
      credential // PublicKeyCredential
    )
    ```
    See the [Android](../../../clients/android/registration) registration guide for more details.
  </TabItem>
</Tabs>

