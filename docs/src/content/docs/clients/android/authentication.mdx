---
title: 'Android: Authentication'
---

import {Aside, Tabs,  TabItem } from "@astrojs/starlight/components";

Authenticate an existing [Passkey](../../guides/concepts#passkeys) with the [Service](../../server/introduction).

Get started by initializing the AssertionApi with an OkHttpClient and CookieJar.
```kotlin
val httpClient = OkHttpClient.Builder()
    .cookieJar(cookieJar) // Use Cookie jar to share cookies between requests
    .build()
val assertionApi = AssertionApi(httpClient)
```


## Options

Fetch attestation options from the service.
```kotlin
val options = assertionApi.postAssertionOptions(
    origin, // Origin Server
    "User-Agent-String", // Required for checking the authenticator fingerprint
    JSONObject() // Additional Request Options
)
```

## Creating

There are several ways to handle the creation of a new Passkey.
We recommend
using the [FIDO2ApiClient](https://developers.google.com/identity/fido/android/native-apps) or [CredentialManager](https://developer.android.com/identity/sign-in/credential-manager)

<Tabs>
  <TabItem label="FIDO2ApiClient">
    <Aside>
      FIDO2Client is deprecated which has been replaced by the CredentialManager.
      Not all features are available as of this writing in the CredentialManager.
    </Aside>
    ```kotlin
    // MainActivity.kt
    import foundation.algorand.auth.fido2.*

    ```
  </TabItem>
  <TabItem label="CredentialManager[WIP]">
    ```kotlin
    // MainActivity.kt
    import foundation.algorand.auth.fido2.*

    val credential = PublicKeyCredential()
    ```
  </TabItem>
</Tabs>

## Response

```kotlin
val response = assertionApi.postAssertionResponse(
    origin, // Origin Server
    "User-Agent-String", // Required for checking the authenticator fingerprint
    credential // PublicKeyCredential
)
```
